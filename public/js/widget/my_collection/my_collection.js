define(["jquery"],function(a){function b(b){var c=b.shop_id,e=b.place_id||0;a.ajax({url:"##urlhere##",type:"POST",data:{shop_id:c,place_id:e},beforeSend:function(){},success:function(b){if(b&&"true"==b.success){var e=d.indexOf();if(-1===e)return;d.splice(e,1),a(".collection-row-book[data-shop_id="+c+"]").empty().html('<div class="add"></div>').addClass("collection-row-none")}},error:function(){}})}function c(b){function c(a){return'<div class="collection-row-book" data-shop_id="'+a.shop_id+'"><div class="collection-row-book-close"><i class="close"></i></div><div class="collection-row-book-left"><div class="logo"><img src="http://localhost:8080/takeaway/public/'+a.shop_logo+'"></div><span title="平均送餐时间'+a.deliver_time+'分钟">'+a.deliver_time+'分钟</span></div><div class="collection-row-book-right"><div class="title"><p>'+a.shop_name+'</p></div><div class="style"><span>'+a.shop_type+'</span></div><div class="remark"><div class="star" title="餐厅评价：'+a.shop_level+'星" style="background-position: -1px '+(-334+15.5*Math.ceil(2*a.shop_level))+'px;"></div><span>'+a.order_count+"订单</span></div></div></div>"}var e=b.shop_id,f=b.place_id||0;a.ajax({url:"##urlhere##",type:"POST",data:{shop_id:e,place_id:f},beforeSend:function(){},success:function(b){if(b&&"true"==b.success){var e=b.data;if(d.indexOf(e.shop_id)>-1)return;d.push(e.shop_id),a(".collection-row-none:first").html(c(e))}},error:function(){}})}console.log("my collection loaded");var d=Array.prototype.slice.call(a(".collection-row-book:has(.collection-row-book-close)").map(function(b,c){return a(c).data("shop_id")}));a(".collection-row-book-close, .more_shops-row-book .uncollect").on("click",function(c){c.preventDefault(),c.stopPropagation();var d=a(this),e=d.parent().data("shop_id");if(e){var f=d.parent().data("place_id");b({shop_id:e,place_id:f})}}),a(".more_shops-row-book .collect").on("click",function(b){b.preventDefault(),b.stopPropagation();var d=a(this),e=d.parent().data("shop_id");if(e){var f=d.parent().data("place_id");c({shop_id:e,place_id:f})}})});